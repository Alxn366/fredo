// Language translations object (unchanged)
const translations = {
  en: {
    home: "Home",
    features: "Features",
    about: "About",
    contact: "Contact",
    offer: "Countdown",
    days: "Days",
    hours: "Hours",
    minutes: "Minutes",
    seconds: "Seconds",
    title1: "Your Kitchen",
    title2: "Our Solution",
    subtitle:
      "Fredo - The intelligent kitchen assistant that does all the work for you",
    learn_more: "Learn More",
    features_title: "Features",
    features_subtitle: "Discover Fredo's Capabilities",
    feature1: "Smart Cooking",
    feature1_desc:
      "Prepares thousands of recipes with perfect results every time",
    feature2: "Precision Baking",
    feature2_desc: "Specialized baking modes with exact temperature control",
    feature3: "Beverage Master",
    feature3_desc: "Prepares perfect coffee, tea and specialty drinks",
    feature4: "Multi-Cuisine",
    feature4_desc: "Expert in international cuisines from 25+ countries",
    feature5: "Auto-Cleaning",
    feature5_desc: "Self-cleaning system with steam sterilization",
    feature6: "Water Purification",
    feature6_desc: "Built-in water filtration for healthier cooking",
    feature7: "Waste Management",
    feature7_desc: "Smart composting and recycling system",
    feature8: "Hygiene Control",
    feature8_desc: "UV sanitation and bacterial monitoring",
    feature9: "Smart Integration",
    feature9_desc: "Works with Alexa, Google Home and Apple HomeKit",
    feature10: "Meal Planning",
    feature10_desc: "Weekly meal plans based on dietary needs",
    feature11: "Nutrition AI",
    feature11_desc: "Tracks macros and suggests balanced meals",
    feature12: "Auto-Shopping",
    feature12_desc: "Orders ingredients directly from local stores",
    feature13: "Eco Mode",
    feature13_desc: "Reduces energy consumption by up to 40%",
    feature14: "Backup Power",
    feature14_desc: "48-hour battery backup for power outages",
    feature15: "Cloud Recipes",
    feature15_desc: "Access to 50,000+ cloud-based recipes",
    feature16: "Software Updates",
    feature16_desc: "Regular feature updates via WiFi",
    demo_title: "Interactive Demo",
    demo_subtitle: "Try Fredo Now",
    start_demo: "Start Fredo Demo",
    about_title: "About Fredo",
    about_subtitle: "Revolutionizing Kitchen Experience",
    about_desc1:
      "Fredo is the world's first fully autonomous kitchen assistant that handles all cooking, cleaning and organization tasks.",
    about_desc2:
      "Using advanced AI and robotics, Fredo learns your preferences and adapts to your lifestyle, making kitchen work a thing of the past.",
    contact_us: "Contact Us",
    newsletter_title: "Subscribe to Newsletter",
    email_placeholder: "Enter your email",
    subscribe: "Subscribe",
    services: "Services",
    service1: "Product Support",
    service2: "Installation",
    service3: "Recipes Database",
    service4: "FAQ",
    address: "Berlin, Germany 10115",
    rights: "All rights reserved",
    offer_ended: "Special Offer Has Ended!",
  },
  de: {
    home: "Startseite",
    features: "Funktionen",
    about: "Über uns",
    contact: "Kontakt",
    offer: "Countdown",
    days: "Tage",
    hours: "Stunden",
    minutes: "Minuten",
    seconds: "Sekunden",
    title1: "Ihre Küche",
    title2: "Unsere Lösung",
    subtitle:
      "Fredo - Der intelligente Küchenassistent, der alle Arbeiten für Sie erledigt",
    learn_more: "Mehr erfahren",
    features_title: "Funktionen",
    features_subtitle: "Entdecken Sie Fredos Fähigkeiten",
    feature1: "Intelligentes Kochen",
    feature1_desc: "Bereitet tausende Rezepte perfekt zu",
    feature2: "Präzisionsbacken",
    feature2_desc: "Spezielle Backprogramme mit genauer Temperaturkontrolle",
    feature3: "Getränkespezialist",
    feature3_desc: "Bereitet perfekten Kaffee, Tee und Spezialgetränke zu",
    feature4: "Multiküchen-System",
    feature4_desc: "Experte für internationale Küchen aus über 25 Ländern",
    feature5: "Selbstreinigung",
    feature5_desc: "Automatisches Reinigungssystem mit Dampfsterilisation",
    feature6: "Wasseraufbereitung",
    feature6_desc: "Integrierte Wasserfiltration für gesünderes Kochen",
    feature7: "Abfallmanagement",
    feature7_desc: "Intelligentes Kompost- und Recyclingsystem",
    feature8: "Hygienekontrolle",
    feature8_desc: "UV-Desinfektion und Bakterienüberwachung",
    feature9: "Smart Home Integration",
    feature9_desc: "Kompatibel mit Alexa, Google Home und Apple HomeKit",
    feature10: "Mahlzeitenplanung",
    feature10_desc:
      "Wöchentliche Essenspläne basierend auf Ernährungsbedürfnissen",
    feature11: "Ernährungs-KI",
    feature11_desc:
      "Verfolgt Makronährstoffe und schlägt ausgewogene Mahlzeiten vor",
    feature12: "Automatischer Einkauf",
    feature12_desc: "Bestellt Zutaten direkt bei lokalen Händlern",
    feature13: "Eco-Modus",
    feature13_desc: "Reduziert Energieverbrauch um bis zu 40%",
    feature14: "Notstromversorgung",
    feature14_desc: "48-Stunden Akkubackup bei Stromausfall",
    feature15: "Cloud-Rezepte",
    feature15_desc: "Zugriff auf über 50.000 Cloud-basierte Rezepte",
    feature16: "Software-Updates",
    feature16_desc: "Regelmäßige Funktionsupdates per WiFi",
    demo_title: "Interaktive Demo",
    demo_subtitle: "Fredo jetzt testen",
    start_demo: "Demo starten",
    about_title: "Über Fredo",
    about_subtitle: "Revolutionäre Küchenerfahrung",
    about_desc1:
      "Fredo ist der weltweit erste vollautonome Küchenassistent, der alle Koch-, Reinigungs- und Organisationsaufgaben übernimmt.",
    about_desc2:
      "Mit fortschrittlicher KI und Robotik lernt Fredo Ihre Vorlieben und passt sich Ihrem Lebensstil an, sodass Küchenarbeit der Vergangenheit angehört.",
    contact_us: "Kontaktieren Sie uns",
    newsletter_title: "Newsletter abonnieren",
    email_placeholder: "Ihre E-Mail-Adresse",
    subscribe: "Abonnieren",
    services: "Dienstleistungen",
    service1: "Produktunterstützung",
    service2: "Installation",
    service3: "Rezeptdatenbank",
    service4: "FAQ",
    address: "Berlin, Deutschland 10115",
    rights: "Alle Rechte vorbehalten",
    offer_ended: "Sonderangebot ist abgelaufen!",
  },
  ar: {
    home: "الرئيسية",
    features: "الميزات",
    about: "حول",
    contact: "اتصل بنا",
    offer: "Countdown",
    days: "أيام",
    hours: "ساعات",
    minutes: "دقائق",
    seconds: "ثواني",
    title1: "مطبخك",
    title2: "حلنا",
    subtitle: "فريدو - المساعد المطبخي الذكي الذي يقوم بكل العمل نيابة عنك",
    learn_more: "تعلم المزيد",
    features_title: "الميزات",
    features_subtitle: "اكتشف قدرات فريدو",
    feature1: "الطبخ الذكي",
    feature1_desc: "يحضر الآلاف من الوصفات بنتائج مثالية في كل مرة",
    feature2: "الخبز الدقيق",
    feature2_desc: "وضعيات خبز متخصصة مع تحكم دقيق في درجة الحرارة",
    feature3: "خبير المشروبات",
    feature3_desc: "يحضر القهوة والشاي والمشروبات الخاصة بشكل مثالي",
    feature4: "متعدد المطابخ",
    feature4_desc: "خبير في المأكولات الدولية من أكثر من 25 دولة",
    feature5: "التنظيف التلقائي",
    feature5_desc: "نظام تنظيف ذاتي مع تعقيم بالبخار",
    feature6: "تنقية المياه",
    feature6_desc: "تصفية مياه مدمجة للطبخ الصحي",
    feature7: "إدارة النفايات",
    feature7_desc: "نظام ذكي للسماد وإعادة التدوير",
    feature8: "التحكم بالنظافة",
    feature8_desc: "التعقيم بالأشعة فوق البنفسجية ومراقبة البكتيريا",
    feature9: "التكامل الذكي",
    feature9_desc: "يعمل مع أليكسا وجوجل هوم وأبل هوم كيت",
    feature10: "تخطيط الوجبات",
    feature10_desc: "خطط وجبات أسبوعية بناءً على الاحتياجات الغذائية",
    feature11: "ذكاء التغذية",
    feature11_desc: "يتتبع المغذيات الكبيرة ويقترح وجبات متوازنة",
    feature12: "التسوق التلقائي",
    feature12_desc: "يطلب المكونات مباشرة من المتاجر المحلية",
    feature13: "الوضع البيئي",
    feature13_desc: "يقلل استهلاك الطاقة بنسبة تصل إلى 40٪",
    feature14: "طاقة احتياطية",
    feature14_desc: "بطارية احتياطية لمدة 48 ساعة عند انقطاع التيار",
    feature15: "وصفات السحابة",
    feature15_desc: "الوصول إلى أكثر من 50،000 وصفة سحابية",
    feature16: "تحديثات البرمجيات",
    feature16_desc: "تحديثات منتظمة للميزات عبر WiFi",
    demo_title: "تجربة تفاعلية",
    demo_subtitle: "جرب فريدو الآن",
    start_demo: "ابدأ تجربة فريدو",
    about_title: "حول فريدو",
    about_subtitle: "ثورة في تجربة المطبخ",
    about_desc1:
      "فريدو هو أول مساعد مطبخي ذاتي بالكامل في العالم يتولى جميع مهام الطهي والتنظيف والتنظيم.",
    about_desc2:
      "باستخدام الذكاء الاصطناعي المتقدم والروبوتات، يتعلم فريدو تفضيلاتك ويتكيف مع نمط حياتك، مما يجعل أعمال المطبخ شيئًا من الماضي.",
    contact_us: "اتصل بنا",
    newsletter_title: "اشترك في النشرة الإخبارية",
    email_placeholder: "أدخل بريدك الإلكتروني",
    subscribe: "اشترك",
    services: "الخدمات",
    service1: "دعم المنتج",
    service2: "التثبيت",
    service3: "قاعدة بيانات الوصفات",
    service4: "الأسئلة الشائعة",
    address: "برلين، ألمانيا 10115",
    rights: "جميع الحقوق محفوظة",
    offer_ended: "انتهى العرض الخاص!",
  },
  ku: {
    home: "Malper",
    features: "Taybetmendî",
    about: "Derbarê",
    contact: "Têkilî",
    offer: "Countdown",
    days: "Roj",
    hours: "Seet",
    minutes: "Deqîqe",
    seconds: "Çirke",
    title1: "Mitbaxa we",
    title2: "Çareseriya me",
    subtitle: "Fredo - Alîkara mitbaxê ya jîrîn ku hemû karên we dike",
    learn_more: "Zêdetir bizane",
    features_title: "Taybetmendî",
    features_subtitle: "Kapasîteyên Fredo vedibêje",
    feature1: "Pêjgeha Jîr",
    feature1_desc: "Hezaran reseptan bi encamên bêkêmasî di her demê de çêdike",
    feature2: "Pijandina Precîz",
    feature2_desc:
      "Modên taybetî yên pijandinê bi kontrola derbasbûna germê ya rast",
    feature3: "Şarezaya Vexwarinan",
    feature3_desc: "Qehwe, çay û vexwarinên taybetî bi awayekî bêkêmasî çêdike",
    feature4: "Pêjgeha Çandî",
    feature4_desc: "Pisporê xwarinên navneteweyî ji zêdetirî 25 welatan",
    feature5: "Paqijkirina Otomatîk",
    feature5_desc: "Sîstema paqijkirina xwe bi sterilîzasyona buharê",
    feature6: "Paqijkirina Avê",
    feature6_desc: "Parzûna avê ya hundirîn ji bo pêjgehiya tenduristî",
    feature7: "Rêveberiya Bermayiyan",
    feature7_desc: "Sîstema kompost û veguhastina jîr",
    feature8: "Kontrola Tenduristiyê",
    feature8_desc: "Sterîlîzasyona UV û şopandina bakteriyan",
    feature9: "Entegrasyona Jîr",
    feature9_desc: "Bi Alexa, Google Home û Apple HomeKit re dixebite",
    feature10: "Plankirina Xwarinan",
    feature10_desc: "Plankirina xwarinên heftane li gorî pêwîstiyên xwarinê",
    feature11: "AI ya Xwarinê",
    feature11_desc: "Makroşaneyan şop dike û xwarinên balansî pêşniyar dike",
    feature12: "Kirîna Otomatîk",
    feature12_desc: "Malzemeyan rasterast ji firoşgehên herêmî fermana dike",
    feature13: "Moda Ekolojîk",
    feature13_desc: "Xercê enerjiyê heta 40% kêm dike",
    feature14: "Hêza Reserve",
    feature14_desc: "Pîlê paşxaneyê ya 48-saetî ji bo kêşên hêzê",
    feature15: "Reseptên Bulutê",
    feature15_desc: "Gihîştina zêdetirî 50,000 reseptên bulutê",
    feature16: "Nûvekirinên Nermalavê",
    feature16_desc: "Nûvekirinên taybetmendiyên rêkûpêk bi WiFi",
    demo_title: "Demoya Interaktîf",
    demo_subtitle: "Niha Fredo biceribîne",
    start_demo: "Demoya Fredo destpê bike",
    about_title: "Derbarê Fredo",
    about_subtitle: "Şoreşek di tecrûbeya mitbaxê de",
    about_desc1:
      "Fredo yekem alîkara mitbaxê ya xweser a cîhanê ye ku hemû karên pêjgehê, paqijkirinê û sazkirinê dike.",
    about_desc2:
      "Bi AI û robotîkê pêşketî, Fredo bijartinên we hîn dibe û xwe bi şêwaza jiyana we dike, ku xebata mitbaxê bibe tiştek ji derbasbûyî.",
    contact_us: "Pê re têkilî daynin",
    newsletter_title: "Aboneya nûçeyan",
    email_placeholder: "E-nameya xwe binivîse",
    subscribe: "Abone bûn",
    services: "Xizmet",
    service1: "Piştgiriya hilberê",
    service2: "Sazkirin",
    service3: "Danegeha reseptan",
    service4: "Pirsên Pir Tê Pirsîn",
    address: "Berlîn, Almanya 10115",
    rights: "Hemû maf parastî ne",
    offer_ended: "Pêşniyara taybet qediya!",
  },
};

// DOM Ready
document.addEventListener("DOMContentLoaded", function () {
  const savedLang = localStorage.getItem("preferredLanguage") || "en";
  setLanguage(savedLang);

  // ✅ Nur einmal: Event-Listener für Sprachbuttons
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", function () {
      document.querySelector(".lang-btn.active")?.classList.remove("active");
      this.classList.add("active");
      setLanguage(this.dataset.lang);
    });
  });

  // ... restlicher Code (Theme, Countdown, etc.)

  

  // Theme Toggle
  const themeToggle = document.getElementById("theme-toggle");
  const savedTheme = localStorage.getItem("theme") || "light";
  document.documentElement.setAttribute("data-theme", savedTheme);
  updateThemeIcon(savedTheme);

  themeToggle.addEventListener("click", () => {
    const current = document.documentElement.getAttribute("data-theme");
    const next = current === "light" ? "dark" : "light";
    document.documentElement.setAttribute("data-theme", next);
    localStorage.setItem("theme", next);
    updateThemeIcon(next);
  });

  updateCountdown();
  setInterval(updateCountdown, 1000);

  document
    .getElementById("fredo-btn")
    ?.addEventListener("click", startFredoDemo);
  setupMobileMenu();
});

// Language Switch
function setLanguage(lang) {
  localStorage.setItem("preferredLanguage", lang);
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";

  // Update text elements
  document.querySelectorAll("[data-translate]").forEach((el) => {
    const key = el.getAttribute("data-translate");
    if (translations[lang]?.[key]) {
      el.textContent = translations[lang][key];
    }
  });

  // Update placeholders
  document.querySelectorAll("[data-translate-placeholder]").forEach((el) => {
    const key = el.getAttribute("data-translate-placeholder");
    if (translations[lang]?.[key]) {
      el.placeholder = translations[lang][key];
    }
  });
}

// Countdown Timer
function updateCountdown() {
  const now = new Date();
  const end = new Date();
  end.setDate(now.getDate() + 365);
  end.setHours(23, 59, 59, 999);

  const diff = end - now;
  if (diff < 0) {
    const container = document.querySelector(".countdown-container");
    if (container) {
      const lang = document.documentElement.lang || "en";
      container.innerHTML = `<h2>${
        translations[lang]?.offer_ended || "Offer Ended"
      }</h2>`;
    }
    return;
  }

  const d = Math.floor(diff / (1000 * 60 * 60 * 24));
  const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
  const m = Math.floor((diff / (1000 * 60)) % 60);
  const s = Math.floor((diff / 1000) % 60);

  const set = (id, val) => {
    const el = document.getElementById(id);
    if (el) el.textContent = val.toString().padStart(2, "0");
  };
  set("days", d);
  set("hours", h);
  set("minutes", m);
  set("seconds", s);
}

// Theme Icon Toggle
function updateThemeIcon(theme) {
  const sun = document.querySelector("#theme-toggle .bx-sun");
  const moon = document.querySelector("#theme-toggle .bx-moon");
  if (!sun || !moon) return;
  sun.style.display = theme === "light" ? "block" : "none";
  moon.style.display = theme === "dark" ? "block" : "none";
}

// Fredo Demo
function startFredoDemo() {
  const lang = document.documentElement.lang || "en";
  const msgs = [
    translations[lang]?.feature1,
    translations[lang]?.feature2,
    translations[lang]?.feature3,
    translations[lang]?.feature4,
  ];
  const msgDiv = document.getElementById("fredo-message");
  if (!msgDiv) return;

  msgDiv.innerHTML = "";
  const btn = document.getElementById("fredo-btn");
  if (!btn) return;
  btn.disabled = true;
  btn.textContent = `${translations[lang]?.start_demo || "Demo"} (Running...)`;

  let i = 0;
  const interval = setInterval(() => {
    if (i < msgs.length) {
      const p = document.createElement("p");
      p.textContent = `Fredo: ${msgs[i]}`;
      p.style.opacity = "0";
      p.style.animation = "fadeIn 0.5s forwards";
      msgDiv.appendChild(p);
      msgDiv.scrollTop = msgDiv.scrollHeight;
      i++;
    } else {
      clearInterval(interval);
      btn.disabled = false;
      btn.textContent = translations[lang]?.start_demo || "Start Demo";
    }
  }, 2000);
}

// Mobile Menu
function setupMobileMenu() {
  const menu = document.querySelector("#menu-icon");
  const nav = document.querySelector(".navbar");
  if (!menu || !nav) return;

  menu.onclick = () => {
    nav.classList.toggle("active");
    menu.classList.toggle("bx-x");
  };

  window.onscroll = () => {
    nav.classList.remove("active");
    menu.classList.remove("bx-x");
  };

  nav.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      nav.classList.remove("active");
      menu.classList.remove("bx-x");
    });
  });
}

// Smooth Scroll
document.querySelectorAll('a[href^="#"]').forEach((a) => {
  a.addEventListener("click", (e) => {
    e.preventDefault();
    const target = document.querySelector(a.getAttribute("href"));
    if (target) {
      window.scrollTo({ top: target.offsetTop - 80, behavior: "smooth" });
    }
  });
});
